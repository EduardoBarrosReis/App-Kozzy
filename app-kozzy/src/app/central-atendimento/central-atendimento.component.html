<div class="app-container">
  <aside class="sidebar" [class.collapsed]="menuCollapsed">
    
    <div class="logo-section">
      <div class="logo-content" [class.hidden]="menuCollapsed">
        <div class="logo-wrapper">
          <div class="logo-icon">
            <span>K</span>
          </div>
          <div class="logo-text">
            <h1>KOZZY</h1>
            <p>Distribuidora</p>
          </div>
        </div>
      </div>
      <div class="logo-collapsed" [class.hidden]="!menuCollapsed">
        <div class="logo-icon">
          <span>K</span>
        </div>
      </div>
    </div>

    <button class="menu-toggle" (click)="toggleMenu()">
      <svg viewBox="0 0 24 24">
        <path d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>

    <nav class="navigation">
      <ul class="menu-list">
        <li *ngFor="let item of menuItems">
          <ng-container *ngIf="item.action">
            <button (click)="item.action()" 
                    class="menu-item"
                    [class.active]="item.active">
              <span class="menu-icon">{{ item.icon }}</span>
              <span class="menu-label" [class.hidden]="menuCollapsed">{{ item.label }}</span>
              <span *ngIf="item.badge && !menuCollapsed" class="menu-badge">
                {{ item.badge }}
              </span>
            </button>
          </ng-container>
          <ng-container *ngIf="item.route">
            <a [routerLink]="item.route" 
               class="menu-item"
               [class.active]="item.active">
              <span class="menu-icon">{{ item.icon }}</span>
              <span class="menu-label" [class.hidden]="menuCollapsed">{{ item.label }}</span>
              <span *ngIf="item.badge && !menuCollapsed" class="menu-badge">
                {{ item.badge }}
              </span>
            </a>
          </ng-container>
        </li>
      </ul>
    </nav>

    <!-- ✅ SEÇÃO DO USUÁRIO COM LINHA ATUALIZADA -->
    <div class="user-section">
      <div class="user-info" [class.hidden]="menuCollapsed" *ngIf="usuarioLogado">
        <div class="user-avatar">
          <span>{{ usuarioLogado?.nome?.charAt(0)?.toUpperCase() }}</span>
        </div>
        <div class="user-details">
          <p class="user-name">{{ usuarioLogado.nome }}</p>
          <p class="user-email">{{ usuarioLogado.email }}</p>
        </div>
      </div>
      
      <button (click)="logout()" class="logout-btn logout-button-fix" [class.collapsed]="menuCollapsed" title="Sair do sistema">
        <svg viewBox="0 0 24 24">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 012-2h4"></path>
          <polyline points="16,17 21,12 16,7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        <span [class.hidden]="menuCollapsed">Sair</span>
      </button>
    </div>
  </aside>

  <!-- resto do código permanece igual -->
  <main class="main-content">
    ...
  </main>
</div>

<app-create-ticket-modal
  [isVisible]="showCreateModal"
  [chamadoParaEditar]="chamadoSelecionado"
  [perfilUsuario]="authService.getUsuarioLogado()?.perfil || 'atendente'"
  [usuarioLogadoNome]="usuarioLogado?.nome || ''"
  (closeModal)="fecharModal()"
  (chamadoCriado)="onChamadoCriado($event)"
  (chamadoAtualizado)="onChamadoAtualizado($event)"
></app-create-ticket-modal>

<app-relatorio-filtro-modal
  [isVisible]="showRelatorioFiltrosModal"
  (closeModal)="fecharModalRelatorioFiltros()"
  (gerarRelatorioEvent)="onGerarRelatorio($event)"
></app-relatorio-filtro-modal>
